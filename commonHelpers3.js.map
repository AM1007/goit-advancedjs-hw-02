{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst formArea = document.querySelector('.form');\nconst inputFields = document.querySelectorAll('input');\nconst submitButton = document.querySelector('button[type=\"submit\"]');\n\n//  ====== creating Promise generator ======\nlet promiseDelay = null;\nlet promiseStep = null;\nlet promiseAmount = null;\nlet promiseElapsed = null;\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      promiseElapsed = delay;\n      const shouldResolve = Math.random() > 0.3;\n      if (shouldResolve) {\n        resolve(position);\n      } else {\n        reject(position);\n      }\n    }, delay);\n  });\n}\n\nconst formManipulate = {\n  block() {\n    submitButton.disabled = true;\n    [...inputFields].forEach(element => {\n      element.disabled = true;\n    });\n  },\n\n  reset() {\n    formArea.reset();\n    submitButton.disabled = false;\n    [...inputFields].forEach(element => {\n      element.disabled = false;\n    });\n  },\n};\n\nformArea.addEventListener('submit', event => {\n  event.preventDefault();\n  promiseDelay = parseInt(event.currentTarget.elements[0].value);\n  promiseStep = parseInt(event.currentTarget.elements[1].value);\n  promiseAmount = parseInt(event.currentTarget.elements[2].value);\n\n  progressBar.start();\n  formManipulate.block();\n\n  for (let i = 0; i < promiseAmount; i += 1) {\n    createPromise(i + 1, promiseDelay + promiseStep * i)\n      .then(value => {\n        iziToast.success({\n          progressBar: false,\n          close: false,\n          position: 'topRight',\n          icon: '',\n          message: `✅ Fulfilled promise ${value} in ${promiseElapsed}ms`,\n        });\n        if (value === promiseAmount) {\n          progressBar.done();\n          formManipulate.reset();\n        }\n      })\n      .catch(value => {\n        iziToast.error({\n          progressBar: false,\n          close: false,\n          position: 'topRight',\n          icon: '',\n          message: `❌ Rejected promise ${value} in ${promiseElapsed}ms`,\n        });\n        if (value === promiseAmount) {\n          progressBar.done();\n          formManipulate.reset();\n        }\n      });\n  }\n});\n\n// ====== adding Form labels mechanics ======\nconst label = document.querySelectorAll('label');\n\n[...label].forEach(element => {\n  element.insertAdjacentHTML(\n    'beforeend',\n    `<div class=\"input-background\"></div>`\n  );\n});\n\nlabel[label.length - 1].insertAdjacentHTML(\n  'afterend',\n  `<div class=\"progress\">\n        <div class=\"generator\"></div>\n        <div class=\"spiner\"></div>\n      </div>`\n);\n\n// ====== adding Form animations\n[...inputFields].forEach(element => {\n  element.setAttribute('min', 1);\n});\n\n[...inputFields].forEach(element => {\n  element.addEventListener('focus', event => {\n    event.target.nextElementSibling.classList.add('focused');\n  });\n  element.addEventListener('blur', event => {\n    event.target.nextElementSibling.classList.remove('focused');\n  });\n});\n\nconst progressBar = {\n  progress: document.querySelector('.progress'),\n  generator: document.querySelector('.generator'),\n  spiner: document.querySelector('.spiner'),\n  generatorTimer: undefined,\n  spinerTimer: undefined,\n  genStepVar: 1,\n  spinStepVar: 1,\n\n  start() {\n    this.generatorTimer = setInterval(() => {\n      switch (this.genStepVar) {\n        case 1:\n          this.generator.textContent = 'Resolving';\n          this.genStepVar += 1;\n          break;\n        case 2:\n          this.generator.textContent = 'Resolving.';\n          this.genStepVar += 1;\n          break;\n        case 3:\n          this.generator.textContent = 'Resolving..';\n          this.genStepVar += 1;\n          break;\n        case 4:\n          this.generator.textContent = 'Resolving...';\n          this.genStepVar = 1;\n          break;\n      }\n    }, 500);\n    this.spinerTimer = setInterval(() => {\n      switch (this.spinStepVar) {\n        case 1:\n          this.spiner.textContent = '╱';\n          this.spinStepVar += 1;\n          break;\n        case 2:\n          this.spiner.textContent = '──';\n          this.spinStepVar += 1;\n          break;\n        case 3:\n          this.spiner.textContent = '╲';\n          this.spinStepVar += 1;\n          break;\n        case 4:\n          this.spiner.textContent = '│';\n          this.spinStepVar = 1;\n          break;\n      }\n    }, 200);\n  },\n\n  done() {\n    clearInterval(this.generatorTimer);\n    this.generatorTimer = undefined;\n    clearInterval(this.spinerTimer);\n    this.spinerTimer = undefined;\n    this.progress.innerHTML = `<div class=\"done\">Done!</div>`;\n    setTimeout(() => {\n      this.progress.innerHTML = `<div class=\"generator\"></div>\n        <div class=\"spiner\"></div>`;\n      this.generator = document.querySelector('.generator');\n      this.spiner = document.querySelector('.spiner');\n    }, 2000);\n  },\n};\n\n// ====== adding Fonts ======\nconst headTitle = document.head.querySelector('title');\n\nheadTitle.insertAdjacentHTML(\n  'afterend',\n  `<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin />\n    <link\n      href=\"https://fonts.googleapis.com/css2?family=VT323&display=swap\"\n      rel=\"stylesheet\"\n    />\n    <link\n      rel=\"preload\"\n      href=\"https://upload.wikimedia.org/wikipedia/commons/8/8a/10x10_checkered_board_transparent.svg\"\n      as=\"image\"\n      type=\"image/svg+xml\"\n      crossorigin\n    />`\n);\n\n// ====== adding Styles =======\n\nconst link = document.querySelector('a');\nlink.setAttribute('id', 'pageLink');\ndocument.body.style.cssText = `overflow: hidden; width: 100vw; height: 100vh; background: radial-gradient(transparent, #e9e9e9);`;\n\nconst styles = document.styleSheets[0];\n\nstyles.insertRule(` #pageLink {\n  font-family: sans-serif;\n  text-transform: uppercase;\n  font-size: 0.8em;\n  letter-spacing: 0.1em;\n  text-decoration: none;\n  color: #1D1B1B;\n}`);\n\nstyles.insertRule(` #pageLink:hover {\n  color: #00f;\n}`);\n\nstyles.insertRule(`@-webkit-keyframes anim-gradient {\n  0% {\n    background-position: -50% -50%;\n  }\n  25% {\n    background-position: 75% 200%;\n  }\n  50% {\n    background-position: 200% -50%;\n  }\n  75% {\n    background-position: 75% -200%;\n  }\n  100% {\n    background-position: -50% -50%;\n  }\n}`);\n\nstyles.insertRule(`.form {\n  position: relative;\n  top: 40%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 400px;\n  height: 500px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 30px;\n  background-color: #00f;\n  box-shadow: 0 0 0 3px #0ff, 0 0 0 5px #00f, 0 0 0 8px #0ff, 0 0 0 12px #00f,\n    15px 15px 0px 10px #00000099;\n  color: #0ff;\n  font-family: 'VT323', monospace;\n  font-size: 20px;\n  -webkit-font-smoothing: none;\n}`);\n\nstyles.insertRule(`.form::before {\n  content: 'PROMISE GENERATOR';\n  position: absolute;\n  top: 0%;\n  left: 50%;\n  height: 15px;\n  transform: translate(-50%, -11px);\n  background-color: #0ff;\n  color: #00f;\n  padding: 1px 5px 0px 5px;\n  vertical-align: text-top;\n  line-height: 12px;\n}`);\n\nstyles.insertRule(`label {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  margin-top: 10px;\n}`);\n\nstyles.insertRule(`label:first-of-type {\n  margin-top: 100px;\n}`);\n\nstyles.insertRule(`.input-background {\n  pointer-events: none;\n  position: absolute;\n  right: 30px;\n  display: block;\n  width: 180px;\n  height: 22px;\n  background-color: #00ffff96;\n  -webkit-mask-image: url(https://upload.wikimedia.org/wikipedia/commons/8/8a/10x10_checkered_board_transparent.svg);\n  mask-image: url(https://upload.wikimedia.org/wikipedia/commons/8/8a/10x10_checkered_board_transparent.svg);\n  -webkit-mask-size: 12%;\n  mask-size: 12%;\n  -webkit-mask-repeat: repeat;\n  mask-repeat: repeat;\n}`);\n\nstyles.insertRule(`.focused {\n  -webkit-mask-image: none !important;\n  mask-image: none !important;\n}`);\n\nstyles.insertRule(`input[type='number'] {\n  z-index: 1;\n  width: 180px;\n  height: 22px;\n  padding: 0 5px 0;\n  font-family: inherit;\n  font-size: inherit;\n  outline: none;\n  caret-color: #f00;\n  border: solid 2px transparent;\n  background-color: transparent;\n  color: #fff;\n  -moz-appearance: textfield;\n}`);\n\nstyles.insertRule(`input[type='number']::-webkit-outer-spin-button,\ninput[type='number']::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}`);\n\nstyles.insertRule(`input[type='number']:focus {\n  border: dotted 2px #00ffff96;\n}`);\n\nstyles.insertRule(`.progress {\n  position: absolute;\n  top: 280px;\n  left: 50%;\n  width: 130px;\n  height: 30px;\n  transform: translate(-50%, 0);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}`);\n\nstyles.insertRule(`.generator {\n  width: 100px;\n}`);\n\nstyles.insertRule(`.spiner {\n  width: 25px;\n  text-align: center;\n}`);\n\nstyles.insertRule(`.done {\n  width: 100%;\n  text-align: center;\n}`);\n\nstyles.insertRule(`button[type='submit'] {\n  cursor: pointer;\n  display: block;\n  width: 150px;\n  height: 50px;\n  background-color: #fff;\n  border: none;\n  outline: none;\n  box-shadow: 5px 5px 0px 0px #00000099;\n  font-family: inherit;\n  font-size: inherit;\n  text-transform: uppercase;\n  text-align: center;\n  margin-top: 120px;\n}`);\n\nstyles.insertRule(`button[type='submit']:focus,\nbutton[type='submit']:hover {\n  background-color: #ff0;\n}`);\n\nstyles.insertRule(`button[type='submit']:active {\n  background-color: #ff0;\n  box-shadow: none;\n  transform: translate(5px, 5px);\n}`);\n\nstyles.insertRule(`button[type='submit']:disabled {\n  cursor: not-allowed;\n  background-color: silver;\n  color: gray;\n}`);\n\nstyles.insertRule(`button[type='submit']:disabled:focus, button[type='submit']:disabled:hover {\n  background-color: silver;\n}`);\n\nstyles.insertRule(`button[type='submit']:disabled:active {\n  transform: none;\n  box-shadow: 5px 5px 0px 0px #00000099;\n}\n`);\n"],"names":["formArea","inputFields","submitButton","promiseDelay","promiseStep","promiseAmount","promiseElapsed","createPromise","position","delay","resolve","reject","formManipulate","element","event","progressBar","i","value","iziToast","label","headTitle","link","styles"],"mappings":"wIAGA,MAAMA,EAAW,SAAS,cAAc,OAAO,EACzCC,EAAc,SAAS,iBAAiB,OAAO,EAC/CC,EAAe,SAAS,cAAc,uBAAuB,EAGnE,IAAIC,EAAe,KACfC,EAAc,KACdC,EAAgB,KAChBC,EAAiB,KAErB,SAASC,EAAcC,EAAUC,EAAO,CACtC,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACtC,WAAW,IAAM,CACfL,EAAiBG,EACK,KAAK,OAAM,EAAK,GAEpCC,EAAQF,CAAQ,EAEhBG,EAAOH,CAAQ,CAElB,EAAEC,CAAK,CACZ,CAAG,CACH,CAEA,MAAMG,EAAiB,CACrB,OAAQ,CACNV,EAAa,SAAW,GACxB,CAAC,GAAGD,CAAW,EAAE,QAAQY,GAAW,CAClCA,EAAQ,SAAW,EACzB,CAAK,CACF,EAED,OAAQ,CACNb,EAAS,MAAK,EACdE,EAAa,SAAW,GACxB,CAAC,GAAGD,CAAW,EAAE,QAAQY,GAAW,CAClCA,EAAQ,SAAW,EACzB,CAAK,CACF,CACH,EAEAb,EAAS,iBAAiB,SAAUc,GAAS,CAC3CA,EAAM,eAAc,EACpBX,EAAe,SAASW,EAAM,cAAc,SAAS,GAAG,KAAK,EAC7DV,EAAc,SAASU,EAAM,cAAc,SAAS,GAAG,KAAK,EAC5DT,EAAgB,SAASS,EAAM,cAAc,SAAS,GAAG,KAAK,EAE9DC,EAAY,MAAK,EACjBH,EAAe,MAAK,EAEpB,QAASI,EAAI,EAAGA,EAAIX,EAAeW,GAAK,EACtCT,EAAcS,EAAI,EAAGb,EAAeC,EAAcY,CAAC,EAChD,KAAKC,GAAS,CACbC,EAAS,QAAQ,CACf,YAAa,GACb,MAAO,GACP,SAAU,WACV,KAAM,GACN,QAAS,uBAAuBD,QAAYX,KACtD,CAAS,EACGW,IAAUZ,IACZU,EAAY,KAAI,EAChBH,EAAe,MAAK,EAE9B,CAAO,EACA,MAAMK,GAAS,CACdC,EAAS,MAAM,CACb,YAAa,GACb,MAAO,GACP,SAAU,WACV,KAAM,GACN,QAAS,sBAAsBD,QAAYX,KACrD,CAAS,EACGW,IAAUZ,IACZU,EAAY,KAAI,EAChBH,EAAe,MAAK,EAE9B,CAAO,CAEP,CAAC,EAGD,MAAMO,EAAQ,SAAS,iBAAiB,OAAO,EAE/C,CAAC,GAAGA,CAAK,EAAE,QAAQN,GAAW,CAC5BA,EAAQ,mBACN,YACA,sCACJ,CACA,CAAC,EAEDM,EAAMA,EAAM,OAAS,GAAG,mBACtB,WACA;AAAA;AAAA;AAAA,aAIF,EAGA,CAAC,GAAGlB,CAAW,EAAE,QAAQY,GAAW,CAClCA,EAAQ,aAAa,MAAO,CAAC,CAC/B,CAAC,EAED,CAAC,GAAGZ,CAAW,EAAE,QAAQY,GAAW,CAClCA,EAAQ,iBAAiB,QAASC,GAAS,CACzCA,EAAM,OAAO,mBAAmB,UAAU,IAAI,SAAS,CAC3D,CAAG,EACDD,EAAQ,iBAAiB,OAAQC,GAAS,CACxCA,EAAM,OAAO,mBAAmB,UAAU,OAAO,SAAS,CAC9D,CAAG,CACH,CAAC,EAED,MAAMC,EAAc,CAClB,SAAU,SAAS,cAAc,WAAW,EAC5C,UAAW,SAAS,cAAc,YAAY,EAC9C,OAAQ,SAAS,cAAc,SAAS,EACxC,eAAgB,OAChB,YAAa,OACb,WAAY,EACZ,YAAa,EAEb,OAAQ,CACN,KAAK,eAAiB,YAAY,IAAM,CACtC,OAAQ,KAAK,WAAU,CACrB,IAAK,GACH,KAAK,UAAU,YAAc,YAC7B,KAAK,YAAc,EACnB,MACF,IAAK,GACH,KAAK,UAAU,YAAc,aAC7B,KAAK,YAAc,EACnB,MACF,IAAK,GACH,KAAK,UAAU,YAAc,cAC7B,KAAK,YAAc,EACnB,MACF,IAAK,GACH,KAAK,UAAU,YAAc,eAC7B,KAAK,WAAa,EAClB,KACH,CACF,EAAE,GAAG,EACN,KAAK,YAAc,YAAY,IAAM,CACnC,OAAQ,KAAK,YAAW,CACtB,IAAK,GACH,KAAK,OAAO,YAAc,IAC1B,KAAK,aAAe,EACpB,MACF,IAAK,GACH,KAAK,OAAO,YAAc,KAC1B,KAAK,aAAe,EACpB,MACF,IAAK,GACH,KAAK,OAAO,YAAc,IAC1B,KAAK,aAAe,EACpB,MACF,IAAK,GACH,KAAK,OAAO,YAAc,IAC1B,KAAK,YAAc,EACnB,KACH,CACF,EAAE,GAAG,CACP,EAED,MAAO,CACL,cAAc,KAAK,cAAc,EACjC,KAAK,eAAiB,OACtB,cAAc,KAAK,WAAW,EAC9B,KAAK,YAAc,OACnB,KAAK,SAAS,UAAY,gCAC1B,WAAW,IAAM,CACf,KAAK,SAAS,UAAY;AAAA,oCAE1B,KAAK,UAAY,SAAS,cAAc,YAAY,EACpD,KAAK,OAAS,SAAS,cAAc,SAAS,CAC/C,EAAE,GAAI,CACR,CACH,EAGMK,EAAY,SAAS,KAAK,cAAc,OAAO,EAErDA,EAAU,mBACR,WACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAaF,EAIA,MAAMC,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,aAAa,KAAM,UAAU,EAClC,SAAS,KAAK,MAAM,QAAU,oGAE9B,MAAMC,EAAS,SAAS,YAAY,GAEpCA,EAAO,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOhB,EAEFA,EAAO,WAAW;AAAA;AAAA,EAEhB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBhB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAkBhB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYhB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMhB,EAEFA,EAAO,WAAW;AAAA;AAAA,EAEhB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAchB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA,EAGhB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAahB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA,EAGhB,EAEFA,EAAO,WAAW;AAAA;AAAA,EAEhB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUhB,EAEFA,EAAO,WAAW;AAAA;AAAA,EAEhB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA,EAGhB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA,EAGhB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAchB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA,EAGhB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA;AAAA,EAIhB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA;AAAA,EAIhB,EAEFA,EAAO,WAAW;AAAA;AAAA,EAEhB,EAEFA,EAAO,WAAW;AAAA;AAAA;AAAA;AAAA,CAIjB"}