{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'flatpickr/dist/themes/dark.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst counterInput = document.querySelector('#datetime-picker');\nconst startCounter = document.querySelector('[data-start]');\n// ====== adding a \"Reset\" button ======\nconst resetCounter = document.createElement('button');\nresetCounter.setAttribute('id', 'resetBtn');\nstartCounter.insertAdjacentElement('afterend', resetCounter);\nstartCounter.setAttribute('id', 'startBtn');\nresetCounter.textContent = 'Reset';\nresetCounter.type = 'button';\nresetCounter.setAttribute('data-reset', '');\nresetCounter.setAttribute('disabled', '');\n\n// ====== adding a Headline ======\nconst backLink = counterInput.previousElementSibling;\nconst headline = document.createElement('h1');\nheadline.className = 'title';\nheadline.textContent = 'Pick an expiration date';\nbackLink.insertAdjacentElement('afterend', headline);\n\nlet currentDate = null;\nlet setDate = null;\nlet progressDate = null;\nlet timerId1 = null;\nlet timerId2 = null;\n\n// ====== adding Time Units conversion function ======\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n// ====== adding Two-digit form view function ======\n\nconst addLeadingZero = value => String(value).padStart(2, '0');\n\n// ====== adding Flatpickr options ======\n\nconst options = {\n  locale: {\n    firstDayOfWeek: 1,\n  },\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    currentDate = new Date();\n    setDate = selectedDates[0];\n    if (setDate.getTime() - currentDate.getTime() > 0) {\n      startCounter.disabled = false;\n    } else {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please choose a future date!',\n      });\n    }\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\n// ====== adding a Countdown function function =====\n\nconst timer = document.body.querySelector('.timer');\ntimer.insertAdjacentHTML(\n  'afterend',\n  `\n  <div class=\"end\"></div>\n  <div class=\"progress\">\n    <div class=\"circle\"></div>\n    <span class=\"percentage\"></span>\n  </div>\n`\n);\nconst endDiv = document.querySelector('.end');\n\nfunction countDown() {\n  currentDate = new Date();\n  let remainingTime = setDate.getTime() - currentDate.getTime();\n  if (remainingTime > 0) {\n    resetCounter.disabled = false;\n    const { days, hours, minutes, seconds } = convertMs(remainingTime);\n    endDiv.textContent = `Time's up in: ${addLeadingZero(\n      days\n    )} Days ${addLeadingZero(hours)}:${addLeadingZero(\n      minutes\n    )}:${addLeadingZero(seconds)}`;\n  } else {\n    progressCircle.style.background = `conic-gradient(#fafafa 0deg 360deg, transparent 360deg 360deg)`;\n    progressPercent.textContent = `100%`;\n    endDiv.textContent = 'Time has expired!';\n    clearInterval(timerId1);\n    clearInterval(timerId2);\n    startCounter.disabled = true;\n    resetCounter.disabled = false;\n    iziToast.success({\n      title: 'OK',\n      message: 'Your wait has ended! Relax...',\n    });\n  }\n}\n\n// ====== adding Progress bar ======\nconst progressCircle = document.querySelector('.circle');\nconst progressPercent = document.querySelector('.percentage');\n\nconst initialProgressCircleStyles = {\n  background: progressCircle.style.background,\n};\n\nconst progressBar = () => {\n  let nowDate = new Date();\n  let hundredPercent = setDate.getTime() - progressDate.getTime();\n  let currentProgress = setDate.getTime() - nowDate.getTime();\n  let percentCoeficient = (hundredPercent - currentProgress) / hundredPercent;\n  if (percentCoeficient > 1) {\n    percentCoeficient = 1;\n  }\n  let progressDegrees = Math.round(360 * percentCoeficient);\n  let progressNumber = Math.round(percentCoeficient * 100);\n  progressCircle.style.background = `conic-gradient(#daf6ff 0deg ${progressDegrees}deg, transparent ${progressDegrees}deg 360deg)`;\n  progressPercent.textContent = `${progressNumber}%`;\n};\n\n// ====== assigning functions to Timer Control buttons ======\n\nstartCounter.disabled = true;\n\nstartCounter.addEventListener('click', () => {\n  timerId1 = setInterval(countDown, 1000);\n  timerId2 = setInterval(progressBar, 100);\n  startCounter.disabled = true;\n  counterInput.disabled = true;\n  endDiv.style.display = 'block';\n  counterInput.style.display = 'none';\n  progressDate = new Date();\n});\n\nresetCounter.addEventListener('click', () => {\n  resetCounter.disabled = true;\n  counterInput.disabled = false;\n  counterInput.style.display = 'block';\n  if (progressCircle) {\n    progressCircle.style.background = initialProgressCircleStyles.background;\n  }\n  progressPercent.textContent = '';\n  endDiv.textContent = '';\n  endDiv.style.display = 'none';\n  clearInterval(timerId1);\n  clearInterval(timerId2);\n});\n\n// ====== Styles ======\n\nconst headTitle = document.head.querySelector('title');\nconst link = document.querySelector('a');\nlink.setAttribute('id', 'pageLink');\nconst styles = document.styleSheets[0];\n\nheadTitle.insertAdjacentHTML(\n  'afterend',\n  `<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap\" rel=\"stylesheet\">\n    `\n);\n\nstyles.insertRule(`body {\n  height: 100vh;\n  background: #0f3854;\n  background: radial-gradient(ellipse at center,  #0a2e38  0%, #000000 70%);\n  background-size: 100%;\n  background-repeat: no-repeat;\n}`);\n\nstyles.insertRule(` #pageLink {\n  text-decoration: none;\n  font-family: 'Share Tech Mono', monospace;\n  color: #456671;\n}`);\n\nstyles.insertRule(` #pageLink:hover {\n  color: #daf6ff;\n  text-shadow: 0 0 20px rgba(10, 175, 230, 1), 0 0 20px rgba(10, 175, 230, 0);\n}`);\n\nstyles.insertRule(` .title {\n  font-family: 'Share Tech Mono', monospace;\n    text-align: center;\n    color: #daf6ff;\n    text-shadow: 0 0 20px rgba(10, 175, 230, 1), 0 0 20px rgba(10, 175, 230, 0);\n}`);\n\nstyles.insertRule(`#datetime-picker {\n  position: absolute;\n  left: 50%;\n  top: 150px;\n  transform: translate(-50%, -50%);\n  width: 308px;\n  padding: 5px;\n  font-family: 'Share Tech Mono', monospace;\n  font-size: 1.5em;\n  text-align: center;\n  outline: none;\n  border: none;\n  color: #daf6ff;\n  background-color: transparent;\n}`);\n\nstyles.insertRule(`#startBtn:disabled{\n  display: none;\n}`);\n\nstyles.insertRule(`#startBtn {\n  position: absolute;\n  left: 50%;\n  bottom: 80px;\n  transform: translate(-50%, -50%);\n  font-family: 'Share Tech Mono', monospace;\n  font-size: 2em;\n  text-align: center;\n  padding: 5px 25px;\n  color: #daf6ff;\n  // text-shadow: 0 0 20px rgba(10, 175, 230, 1), 0 0 20px rgba(10, 175, 230, 0);\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n}`);\n\nstyles.insertRule(`#startBtn:hover {\n  // border: 1px solid #daf6ff;\n  text-shadow: 0 0 20px rgba(10, 175, 230, 1), 0 0 20px rgba(10, 175, 230, 9);\n}`);\n\nstyles.insertRule(`#resetBtn:disabled{\n  display: none;\n}`);\n\nstyles.insertRule(`#resetBtn {\n  position: absolute;\n  left: 50%;\n  bottom: 80px;\n  transform: translate(-50%, -50%);\n  font-family: 'Share Tech Mono', monospace;\n  font-size: 2em;\n  text-align: center;\n  padding: 5px 25px;\n  color: #daf6ff;\n  // text-shadow: 0 0 20px rgba(10, 175, 230, 1), 0 0 20px rgba(10, 175, 230, 0);\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n}`);\n\nstyles.insertRule(`#resetBtn:hover {\n  // border: 1px solid #daf6ff;\n  text-shadow: 0 0 20px rgba(10, 175, 230, 1), 0 0 20px rgba(10, 175, 230, 9);\n}`);\n\nstyles.insertRule(`.field {\n display: none;\n}`);\n\nstyles.insertRule(`.end {\n  position: absolute;\n  left: 50%;\n  top: 150px;\n  transform: translate(-50%, -50%);\n  font-family: 'Share Tech Mono', monospace;\n  font-size: 1.5em;\n  color: #daf6ff;\n}`);\n\n// Progress bar styles\n\nstyles.insertRule(`.progress {\n  position: absolute;\n  top: 52%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 350px;\n  width: 350px;\n  border-radius: 50%;\n}`);\n\nstyles.insertRule(`@-webkit-keyframes circle-in-center {\n  from {\n    -webkit-clip-path: circle(125%);\n    clip-path: circle(125%);\n  }\n  to {\n    -webkit-clip-path: circle(0%);\n    clip-path: circle(0%);\n  }\n}`);\n\nstyles.insertRule(`@keyframes circle-in-center {\n  from {\n    -webkit-clip-path: circle(125%);\n    clip-path: circle(125%);\n  }\n  to {\n    -webkit-clip-path: circle(0%);\n    clip-path: circle(0%);\n  }\n}`);\n\nstyles.insertRule(`.circle {\n  display: block;\n  width: 80%;\n  height: 80%;\n  border-radius: 50%;\n  transform: rotate(-180deg);\n  -webkit-mask-image: radial-gradient(\n    circle at 50% 50%,\n    transparent 60%,\n    black 40%\n  );\n  mask-image: radial-gradient(circle at 50% 50%, transparent 60%, black 40%);\n}`);\n\nstyles.insertRule(`.percentage {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-family: 'Share Tech Mono', monospace;\n  color: #daf6ff;\n  text-shadow: 0 0 20px rgba(10, 175, 230, 1), 0 0 20px rgba(10, 175, 230, 0);\n  font-size: 70px;\n}`);\n"],"names":["counterInput","startCounter","resetCounter","backLink","headline","currentDate","setDate","progressDate","timerId1","timerId2","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","value","options","selectedDates","iziToast","flatpickr","timer","endDiv","countDown","remainingTime","progressCircle","progressPercent","initialProgressCircleStyles","progressBar","nowDate","hundredPercent","currentProgress","percentCoeficient","progressDegrees","progressNumber","headTitle","link","styles"],"mappings":"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"}