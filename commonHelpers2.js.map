{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'flatpickr/dist/themes/dark.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst counterInput = document.querySelector('#datetime-picker');\nconst daysCounter = document.querySelector('[data-days]');\nconst hoursCounter = document.querySelector('[data-hours]');\nconst minutesCounter = document.querySelector('[data-minutes]');\nconst secondsCounter = document.querySelector('[data-seconds]');\nconst startCounter = document.querySelector('[data-start]');\n\n// ====== adding a \"Reset\" button ======\nconst resetCounter = document.createElement('button');\nresetCounter.setAttribute('id', 'resetBtn');\nstartCounter.insertAdjacentElement('afterend', resetCounter);\nstartCounter.setAttribute('id', 'startBtn');\nresetCounter.textContent = 'Reset';\nresetCounter.type = 'button';\nresetCounter.setAttribute('data-reset', '');\nresetCounter.setAttribute('disabled', '');\n\n// ====== adding a Headline ======\nconst backLink = counterInput.previousElementSibling;\nconst headline = document.createElement('h1');\nheadline.className = 'title';\nheadline.textContent = 'Pick an expiration date';\nbackLink.insertAdjacentElement('afterend', headline);\n\nlet currentDate = null;\nlet setDate = null;\nlet progressDate = null;\nlet timerId = null;\nlet intervalId = null;\n\n// ====== adding time units conversion function ======\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n// ====== adding two-digit form view function ======\n\nconst addLeadingZero = value => String(value).padStart(2, '0');\n\n// ====== adding countdown timer function ======\n\nconst countDown = () => {\n  currentDate = new Date();\n  let remainingTime = setDate.getTime() - currentDate.getTime();\n  if (remainingTime > 0) {\n    remainingTime = convertMs(remainingTime);\n\n    let { days, hours, minutes, seconds } = remainingTime;\n    daysCounter.textContent = addLeadingZero(days);\n    hoursCounter.textContent = addLeadingZero(hours);\n    minutesCounter.textContent = addLeadingZero(minutes);\n    secondsCounter.textContent = addLeadingZero(seconds);\n    resetCounter.disabled = false;\n  } else {\n    clearInterval(timerId);\n    startCounter.disabled = true;\n    resetCounter.disabled = false;\n    counterInput.disabled = false;\n    iziToast.success({\n      title: 'OK',\n      message: 'Your wait has ended! Relax...',\n    });\n  }\n};\n\n// ====== adding flatpickr options ======\n\nconst options = {\n  locale: {\n    firstDayOfWeek: 1,\n  },\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    currentDate = new Date();\n    setDate = selectedDates[0];\n    if (setDate.getTime() - currentDate.getTime() > 0) {\n      startCounter.disabled = false;\n    } else {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please choose a future date!',\n      });\n    }\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\n// ====== assigning functions to timer control buttons ======\n\nstartCounter.disabled = true;\n\nstartCounter.addEventListener('click', () => {\n  progressDate = new Date();\n  timerId = setInterval(countDown, 1000);\n  endDiv.style.display = 'block';\n  intervalId = populateEnd();\n  timer.style.display = 'block';\n  startCounter.disabled = true;\n  counterInput.style.display = 'none';\n  counterInput.disabled = true;\n  endDiv.dataset.intervalId = intervalId;\n});\n\nresetCounter.addEventListener('click', () => {\n  clearInterval(timerId);\n  startCounter.disabled = true;\n  resetCounter.disabled = true;\n  counterInput.style.display = 'block';\n  counterInput.disabled = false;\n  daysCounter.textContent = '00';\n  hoursCounter.textContent = '00';\n  minutesCounter.textContent = '00';\n  secondsCounter.textContent = '00';\n  clearInterval(intervalId);\n  endDiv.textContent = '';\n  endDiv.style.display = 'none';\n  timer.style.display = 'none';\n  intervalId = null;\n});\n\n// ====== adding \"Expiring Time\" function =====\n\nconst timer = document.body.querySelector('.timer');\ntimer.style.display = 'none';\ntimer.insertAdjacentHTML('afterend', `<div class=\"end\"></div>`);\nconst endDiv = document.querySelector('.end');\n\nfunction populateEnd() {\n  const updateEndDiv = () => {\n    const remainingTime = setDate.getTime() - new Date().getTime();\n    if (remainingTime > 0) {\n      const remainingTimeObj = convertMs(remainingTime);\n      const { days, hours, minutes, seconds } = remainingTimeObj;\n      endDiv.textContent = `Time's up in: ${addLeadingZero(\n        days\n      )} Days ${addLeadingZero(hours)}:${addLeadingZero(\n        minutes\n      )}:${addLeadingZero(seconds)}`;\n    } else {\n      endDiv.textContent = 'Time has expired!';\n    }\n  };\n  updateEndDiv();\n  const intervalId = setInterval(updateEndDiv, 1000);\n  return intervalId;\n}\n\n// ====== Styles ======\n\nconst headTitle = document.head.querySelector('title');\n\nheadTitle.insertAdjacentHTML(\n  'afterend',\n  `<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap\" rel=\"stylesheet\">\n    `\n);\n\ndocument.styleSheets[0].insertRule(`body {\n  height: 100vh;\n  background: #0f3854;\n  background: radial-gradient(ellipse at center,  #0a2e38  0%, #000000 70%);\n  background-size: 100%;\n  background-repeat: no-repeat;\n}`);\n\ndocument.styleSheets[0].insertRule(` .title {\n  font-family: 'Share Tech Mono', monospace;\n    color: #ffffff;\n    text-align: center;\n    color: #daf6ff;\n    text-shadow: 0 0 20px rgba(10, 175, 230, 1), 0 0 20px rgba(10, 175, 230, 0);\n  \n}`);\n\ndocument.styleSheets[0].insertRule(`#datetime-picker {\n  position: absolute;\n  left: 50%;\n  top: 150px;\n  transform: translate(-50%, -50%);\n  width: 308px;\n  padding: 5px;\n  font-family: 'Share Tech Mono', monospace;\n  font-size: 1.5em;\n  text-align: center;\n  outline: none;\n  border: none;\n  color: #daf6ff;\n  background-color: transparent;\n}`);\n\ndocument.styleSheets[0].insertRule(`#startBtn:disabled{\n  display: none;\n}`);\n\ndocument.styleSheets[0].insertRule(`#startBtn {\n  position: absolute;\n  left: 50%;\n  bottom: 100px;\n  transform: translate(-50%, -50%);\n  font-family: 'Share Tech Mono', monospace;\n  font-size: 1.5em;\n  text-align: center;\n  padding: 5px 25px;\n  color: #daf6ff;\n  // text-shadow: 0 0 20px rgba(10, 175, 230, 1), 0 0 20px rgba(10, 175, 230, 0);\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n}`);\n\ndocument.styleSheets[0].insertRule(`#startBtn:hover {\n  // border: 1px solid #daf6ff;\n  text-shadow: 0 0 20px rgba(10, 175, 230, 1), 0 0 20px rgba(10, 175, 230, 9);\n}`);\n\ndocument.styleSheets[0].insertRule(`#resetBtn:disabled{\n  display: none;\n}`);\n\ndocument.styleSheets[0].insertRule(`#resetBtn {\n  position: absolute;\n  left: 50%;\n  bottom: 100px;\n  transform: translate(-50%, -50%);\n  font-family: 'Share Tech Mono', monospace;\n  font-size: 1.5em;\n  text-align: center;\n  padding: 5px 25px;\n  color: #daf6ff;\n  // text-shadow: 0 0 20px rgba(10, 175, 230, 1), 0 0 20px rgba(10, 175, 230, 0);\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n}`);\n\ndocument.styleSheets[0].insertRule(`#resetBtn:hover {\n  // border: 1px solid #daf6ff;\n  text-shadow: 0 0 20px rgba(10, 175, 230, 1), 0 0 20px rgba(10, 175, 230, 9);\n}`);\n\ndocument.styleSheets[0].insertRule(`.field {\n display: none;\n}`);\n\ndocument.styleSheets[0].insertRule(`.end {\n  position: absolute;\n  left: 50%;\n  top: 150px;\n  transform: translate(-50%, -50%);\n  font-family: 'Share Tech Mono', monospace;\n  font-size: 1.5em;\n  color: #daf6ff;\n}`);\n"],"names":["counterInput","daysCounter","hoursCounter","minutesCounter","secondsCounter","startCounter","resetCounter","backLink","headline","currentDate","setDate","timerId","intervalId","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","value","countDown","remainingTime","iziToast","options","selectedDates","flatpickr","endDiv","populateEnd","timer","updateEndDiv","remainingTimeObj","headTitle"],"mappings":"+IAMA,MAAMA,EAAe,SAAS,cAAc,kBAAkB,EACxDC,EAAc,SAAS,cAAc,aAAa,EAClDC,EAAe,SAAS,cAAc,cAAc,EACpDC,EAAiB,SAAS,cAAc,gBAAgB,EACxDC,EAAiB,SAAS,cAAc,gBAAgB,EACxDC,EAAe,SAAS,cAAc,cAAc,EAGpDC,EAAe,SAAS,cAAc,QAAQ,EACpDA,EAAa,aAAa,KAAM,UAAU,EAC1CD,EAAa,sBAAsB,WAAYC,CAAY,EAC3DD,EAAa,aAAa,KAAM,UAAU,EAC1CC,EAAa,YAAc,QAC3BA,EAAa,KAAO,SACpBA,EAAa,aAAa,aAAc,EAAE,EAC1CA,EAAa,aAAa,WAAY,EAAE,EAGxC,MAAMC,EAAWP,EAAa,uBACxBQ,EAAW,SAAS,cAAc,IAAI,EAC5CA,EAAS,UAAY,QACrBA,EAAS,YAAc,0BACvBD,EAAS,sBAAsB,WAAYC,CAAQ,EAEnD,IAAIC,EAAc,KACdC,EAAU,KAEVC,EAAU,KACVC,EAAa,KAIjB,SAASC,EAAUC,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAIA,MAAMC,EAAiBC,GAAS,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAIvDC,EAAY,IAAM,CACtBZ,EAAc,IAAI,KAClB,IAAIa,EAAgBZ,EAAQ,QAAS,EAAGD,EAAY,QAAO,EAC3D,GAAIa,EAAgB,EAAG,CACrBA,EAAgBT,EAAUS,CAAa,EAEvC,GAAI,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKI,EACxCrB,EAAY,YAAckB,EAAeJ,CAAI,EAC7Cb,EAAa,YAAciB,EAAeH,CAAK,EAC/Cb,EAAe,YAAcgB,EAAeF,CAAO,EACnDb,EAAe,YAAce,EAAeD,CAAO,EACnDZ,EAAa,SAAW,EAC5B,MACI,cAAcK,CAAO,EACrBN,EAAa,SAAW,GACxBC,EAAa,SAAW,GACxBN,EAAa,SAAW,GACxBuB,EAAS,QAAQ,CACf,MAAO,KACP,QAAS,+BACf,CAAK,CAEL,EAIMC,EAAU,CACd,OAAQ,CACN,eAAgB,CACjB,EACD,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBhB,EAAc,IAAI,KAClBC,EAAUe,EAAc,GACpBf,EAAQ,QAAS,EAAGD,EAAY,QAAO,EAAK,EAC9CJ,EAAa,SAAW,GAExBkB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACjB,CAAO,CAEJ,CACH,EAEAG,EAAU,mBAAoBF,CAAO,EAIrCnB,EAAa,SAAW,GAExBA,EAAa,iBAAiB,QAAS,IAAM,CAE3CM,EAAU,YAAYU,EAAW,GAAI,EACrCM,EAAO,MAAM,QAAU,QACvBf,EAAagB,EAAW,EACxBC,EAAM,MAAM,QAAU,QACtBxB,EAAa,SAAW,GACxBL,EAAa,MAAM,QAAU,OAC7BA,EAAa,SAAW,GACxB2B,EAAO,QAAQ,WAAaf,CAC9B,CAAC,EAEDN,EAAa,iBAAiB,QAAS,IAAM,CAC3C,cAAcK,CAAO,EACrBN,EAAa,SAAW,GACxBC,EAAa,SAAW,GACxBN,EAAa,MAAM,QAAU,QAC7BA,EAAa,SAAW,GACxBC,EAAY,YAAc,KAC1BC,EAAa,YAAc,KAC3BC,EAAe,YAAc,KAC7BC,EAAe,YAAc,KAC7B,cAAcQ,CAAU,EACxBe,EAAO,YAAc,GACrBA,EAAO,MAAM,QAAU,OACvBE,EAAM,MAAM,QAAU,OACtBjB,EAAa,IACf,CAAC,EAID,MAAMiB,EAAQ,SAAS,KAAK,cAAc,QAAQ,EAClDA,EAAM,MAAM,QAAU,OACtBA,EAAM,mBAAmB,WAAY,yBAAyB,EAC9D,MAAMF,EAAS,SAAS,cAAc,MAAM,EAE5C,SAASC,GAAc,CACrB,MAAME,EAAe,IAAM,CACzB,MAAMR,EAAgBZ,EAAQ,QAAO,EAAK,IAAI,KAAI,EAAG,UACrD,GAAIY,EAAgB,EAAG,CACrB,MAAMS,EAAmBlB,EAAUS,CAAa,EAC1C,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKa,EAC1CJ,EAAO,YAAc,iBAAiBR,EACpCJ,CACD,UAASI,EAAeH,CAAK,KAAKG,EACjCF,CACD,KAAIE,EAAeD,CAAO,GACjC,MACMS,EAAO,YAAc,mBAE3B,EACE,OAAAG,IACmB,YAAYA,EAAc,GAAI,CAEnD,CAIA,MAAME,EAAY,SAAS,KAAK,cAAc,OAAO,EAErDA,EAAU,mBACR,WACA;AAAA;AAAA;AAAA,KAIF,EAEA,SAAS,YAAY,GAAG,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMjC,EAEF,SAAS,YAAY,GAAG,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOjC,EAEF,SAAS,YAAY,GAAG,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcjC,EAEF,SAAS,YAAY,GAAG,WAAW;AAAA;AAAA,EAEjC,EAEF,SAAS,YAAY,GAAG,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcjC,EAEF,SAAS,YAAY,GAAG,WAAW;AAAA;AAAA;AAAA,EAGjC,EAEF,SAAS,YAAY,GAAG,WAAW;AAAA;AAAA,EAEjC,EAEF,SAAS,YAAY,GAAG,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcjC,EAEF,SAAS,YAAY,GAAG,WAAW;AAAA;AAAA;AAAA,EAGjC,EAEF,SAAS,YAAY,GAAG,WAAW;AAAA;AAAA,EAEjC,EAEF,SAAS,YAAY,GAAG,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQjC"}